<!doctype html>
<html lang="ja">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>è–„ç´«ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ï¼ˆå½“æœˆç¥æ—¥ã¯æ¿ƒèµ¤ï¼å‰å¾Œæœˆã¯è–„è‰²ãƒ»å‰æ—¥ç‰¹åˆ¥æ‰±ã„ãªã—ï¼‰</title>
<style>
  :root{
    --page-bg:#F6F3FF;
    --card-bg:#EDE9FF;
    --title:#3A3A3A;
    --text:#5A5870;

    /* å½“æœˆç”¨ï¼ˆæ¿ƒè‰²ï¼‰ */
    --sun:#E34D4D;                  /* ç¥æ—¥ãƒ»æ—¥æ›œï¼ˆå½“æœˆï¼‰ */
    --sat:#6A7EEA;                  /* åœŸæ›œï¼ˆå½“æœˆï¼‰ */

    /* å‰å¾Œæœˆç”¨ï¼ˆè–„è‰²ï¼‰ */
    --sun-soft:rgba(227,77,77,.6);  /* ç¥æ—¥ãƒ»æ—¥æ›œï¼ˆå‰å¾Œæœˆï¼‰ */
    --sat-soft:rgba(106,126,234,.6);/* åœŸæ›œï¼ˆå‰å¾Œæœˆï¼‰ */

    --divider:#DCD6F4;
    --hover:#F2EEFF;
    --press:#E8E1FF;
    --focus:#7B6CE3;
    --sel:#6B62D1;                  /* é¸æŠæ—¥ã®ä¸¸ */
    --badge-bg:#FFF1F3;
    --badge-tx:#C53D4D;
  }

  html,body{height:100%;margin:0}
  body{
    background:var(--page-bg); color:var(--text);
    font:13px/1.5 system-ui,-apple-system,"Segoe UI","Hiragino Kaku Gothic ProN","Noto Sans JP",sans-serif;
    display:grid;place-items:center;padding:16px;
  }

  .wrap{width:420px;max-width:96vw}
  .card{
    background:linear-gradient(180deg,#F2EEFF 0%,var(--card-bg) 100%);
    border-radius:20px; box-shadow:0 6px 24px rgba(81,62,160,.12);
    padding:14px 14px 10px; position:relative; transform-origin:top center;
  }

  /* ä¸Šéƒ¨ãƒãƒ³ãƒ‰ãƒ« */
  .handle{
    position:absolute; left:50%; transform:translateX(-50%);
    top:10px; width:120px; height:6px; border-radius:3px; background:#CFC8F6;
  }

  .header{display:flex;align-items:center;justify-content:space-between;margin-top:16px;margin-bottom:2px}
  .title{font-size:18px;font-weight:800;color:var(--title);letter-spacing:.02em}
  .nav{display:flex;gap:6px;align-items:center}
  .btn{width:24px;height:24px;border-radius:12px;border:none;background:transparent;display:grid;place-items:center;cursor:pointer;color:#4E4B63;font-size:18px;line-height:1}
  .pill{height:24px;padding:0 10px;border-radius:12px;border:none;background:#7C86F2;color:#fff;font-weight:700;cursor:pointer}
  .btn:hover{background:var(--hover)} .btn:active{background:var(--press)}
  .pill:hover{filter:brightness(1.06)}
  .btn:focus-visible,.pill:focus-visible{outline:2px solid var(--focus);outline-offset:2px}

  .head,.grid{display:grid;grid-template-columns:repeat(7,1fr);gap:4px}
  .dow{height:20px;display:grid;place-items:center;font-weight:700;opacity:.9;font-size:12px;color:#7E78A0}
  .dow.sun{color:var(--sun)} .dow.sat{color:var(--sat)}

  /* ã‚»ãƒ« */
  .cell{position:relative;height:28px;display:grid;place-items:center;background:transparent;user-select:none;font-weight:400;font-size:12px;color:#5A5870}
  .cell > span{position:relative;z-index:2}
  .muted{opacity:.38} /* å‰å¾Œæœˆã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆï¼ˆè–„ã‚°ãƒ¬ãƒ¼ï¼‰ */
  .sun{color:var(--sun)} .sat{color:var(--sat)}

  /* ä»Šæ—¥ï¼šè£…é£¾ãªã—ï¼ˆãƒªãƒ³ã‚°ãªã—ï¼‰ */
  .today{}

  /* é¸æŠæ—¥ã®å††ï¼šç›´å¾„28pxã®å®Œå…¨ãªä¸¸ */
  .selected::before{
    content:""; position:absolute; left:50%; top:50%;
    width:28px; height:28px; transform:translate(-50%,-50%);
    border-radius:50%; background:var(--sel); z-index:1;
  }
  .selected{ color:#fff; }

  /* â€”â€”â€” è‰²ãƒ­ã‚¸ãƒƒã‚¯ï¼ˆå„ªå…ˆåº¦ã‚’æ˜ç¢ºåŒ–ï¼‰ â€”â€”â€” */
  /* å½“æœˆã®ç¥æ—¥ã¯æ¿ƒã„èµ¤ï¼ˆæ›œæ—¥ã‚ˆã‚Šã‚‚å„ªå…ˆï¼‰ */
  .cell.hol:not(.muted):not(.selected){
    color: var(--sun) !important;
  }

  /* å‰å¾Œæœˆï¼šç¥æ—¥ãƒ»æ—¥æ›œã¯è–„ã„èµ¤ã€åœŸæ›œã¯è–„ã„é’ç´«ï¼ˆå½“æœˆã¯å½±éŸ¿ã—ãªã„ï¼‰ */
  .cell.muted.hol,
  .cell.muted.sun{
    opacity: 1 !important;
    color: var(--sun-soft) !important;
  }
  .cell.muted.sat{
    opacity: 1 !important;
    color: var(--sat-soft) !important;
  }

  .footer{margin-top:10px;padding-top:8px;border-top:1px solid var(--divider)}
  .badge{display:inline-block;background:var(--badge-bg);color:var(--badge-tx);border-radius:999px;padding:2px 8px;font-size:11px;margin-left:8px}
  .hl{display:flex;flex-wrap:wrap;gap:10px;margin-top:6px}
</style>
</head>
<body>
  <div class="wrap">
    <div class="card" id="card">
      <div class="handle"></div>

      <div class="header">
        <div class="nav"><button class="btn" id="prev" aria-label="å‰æœˆã¸">â€¹</button></div>
        <div class="title" id="title">YYYYå¹´ Mæœˆ</div>
        <div class="nav"><button class="btn" id="next" aria-label="ç¿Œæœˆã¸">â€º</button></div>
      </div>

      <div class="head" id="cal-head"></div>
      <div class="grid" id="cal-body"></div>

      <div style="display:flex;justify-content:center;margin-top:6px">
        <button class="pill" id="today" aria-label="ä»Šæœˆã¸æˆ»ã‚‹">ğŸ—“ ä»Šæ—¥</button>
      </div>

      <div class="footer">
        <strong>ä»Šæœˆã®ç¥æ—¥</strong><span class="badge">JST</span>
        <div class="hl" id="holidays">èª­ã¿è¾¼ã¿ä¸­â€¦</div>
      </div>
    </div>
  </div>

<script>
  // æœˆæ›œã¯ã˜ã¾ã‚Š
  const startMonday = true;

  // holidays-jp å…¬å¼JSONï¼ˆCORSå¯ãƒŸãƒ©ãƒ¼ï¼‰
  const HOLIDAY_API = "https://holidays-jp.github.io/api/v1/date.json";
  let jpHolidays = {};

  // ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ï¼ˆ2025-09 ï½ 2027-03 æŠœç²‹ï¼‰
  const fallbackHolidays = {
    "2025-09-15":"æ•¬è€ã®æ—¥","2025-09-23":"ç§‹åˆ†ã®æ—¥",
    "2025-10-13":"ã‚¹ãƒãƒ¼ãƒ„ã®æ—¥",
    "2025-11-03":"æ–‡åŒ–ã®æ—¥","2025-11-23":"å‹¤åŠ´æ„Ÿè¬ã®æ—¥","2025-11-24":"å‹¤åŠ´æ„Ÿè¬ã®æ—¥ï¼ˆæŒ¯æ›¿ä¼‘æ—¥ï¼‰",
    // 2025-12 ãªã—
    "2026-01-01":"å…ƒæ—¥","2026-01-12":"æˆäººã®æ—¥",
    "2026-02-11":"å»ºå›½è¨˜å¿µã®æ—¥","2026-02-23":"å¤©çš‡èª•ç”Ÿæ—¥",
    "2026-03-20":"æ˜¥åˆ†ã®æ—¥",
    "2026-04-29":"æ˜­å’Œã®æ—¥",
    "2026-05-03":"æ†²æ³•è¨˜å¿µæ—¥","2026-05-04":"ã¿ã©ã‚Šã®æ—¥","2026-05-05":"ã“ã©ã‚‚ã®æ—¥","2026-05-06":"æ†²æ³•è¨˜å¿µæ—¥ æŒ¯æ›¿ä¼‘æ—¥",
    "2026-07-20":"æµ·ã®æ—¥","2026-08-11":"å±±ã®æ—¥",
    "2026-09-21":"æ•¬è€ã®æ—¥","2026-09-22":"å›½æ°‘ã®ä¼‘æ—¥","2026-09-23":"ç§‹åˆ†ã®æ—¥",
    "2026-10-12":"ã‚¹ãƒãƒ¼ãƒ„ã®æ—¥",
    "2026-11-03":"æ–‡åŒ–ã®æ—¥","2026-11-23":"å‹¤åŠ´æ„Ÿè¬ã®æ—¥",
    // 2026-12 ãªã—
    "2027-01-01":"å…ƒæ—¥","2027-01-11":"æˆäººã®æ—¥",
    "2027-02-11":"å»ºå›½è¨˜å¿µã®æ—¥","2027-02-23":"å¤©çš‡èª•ç”Ÿæ—¥",
    "2027-03-21":"æ˜¥åˆ†ã®æ—¥"
  };

  async function loadHolidays(){
    try{
      const res = await fetch(HOLIDAY_API, {mode:'cors', cache:'force-cache'});
      if(!res.ok) throw new Error('fetch failed');
      const data = await res.json();
      // æ¬ ã‘ã‚’ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ã§è£œå®Œï¼ˆãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯å„ªå…ˆï¼‰
      jpHolidays = Object.assign({}, data, fallbackHolidays);
    }catch(e){
      jpHolidays = fallbackHolidays;
    }finally{
      render(); // ç¥æ—¥åæ˜ ã—ã¦å†æç”»
    }
  }

  const DOW = ["æ—¥","æœˆ","ç«","æ°´","æœ¨","é‡‘","åœŸ"];
  const head = document.getElementById('cal-head');
  const body = document.getElementById('cal-body');
  const titleEl = document.getElementById('title');
  const hl = document.getElementById('holidays');

  const today = new Date(); today.setHours(0,0,0,0);
  let current = new Date(today);
  let selected = new Date(today);

  const pad = n => String(n).padStart(2,'0');
  const ymd = d => `${d.getFullYear()}-${pad(d.getMonth()+1)}-${pad(d.getDate())}`;
  function addMonths(d,n){
    const x = new Date(d), day = x.getDate();
    x.setDate(1); x.setMonth(x.getMonth()+n);
    const last = new Date(x.getFullYear(), x.getMonth()+1, 0).getDate();
    x.setDate(Math.min(day,last));
    return x;
  }

  function renderHead(){
    head.innerHTML = '';
    (startMonday?[1,2,3,4,5,6,0]:[0,1,2,3,4,5,6]).forEach(w=>{
      const el = document.createElement('div');
      el.className = `dow${w===0?' sun':''}${w===6?' sat':''}`;
      el.textContent = DOW[w];
      head.appendChild(el);
    });
  }

  function makeCell(label, dateObj, isMuted){
    const w = dateObj.getDay();
    const el = document.createElement('div');
    el.className = 'cell';
    if(isMuted) el.classList.add('muted');
    if(w===0) el.classList.add('sun');
    if(w===6) el.classList.add('sat');

    const span = document.createElement('span');
    span.textContent = label;
    el.appendChild(span);

    // é¸æŠãƒ»ä»Šæ—¥
    if(ymd(dateObj)===ymd(selected)) el.classList.add('selected');
    if(ymd(dateObj)===ymd(today)) el.classList.add('today');

    // å½“æ—¥ãŒç¥æ—¥ãªã‚‰ holï¼ˆå½“æœˆã¯æ¿ƒèµ¤ã€å‰å¾Œæœˆã¯ä¸‹ã®CSSã§è–„èµ¤ï¼‰
    if (jpHolidays[ymd(dateObj)]) el.classList.add('hol');

    el.onclick = ()=>{
      selected = new Date(dateObj);
      if(isMuted) current = new Date(dateObj);
      render();
    };
    return el;
  }

  function render(){
    const y = current.getFullYear(), m = current.getMonth();
    titleEl.textContent = `${y}å¹´ ${m+1}æœˆ`;

    body.innerHTML = '';
    const first = new Date(y,m,1);
    const last = new Date(y,m+1,0).getDate();
    let start = first.getDay(); if(startMonday) start = (start===0?6:start-1);
    const prevLast = new Date(y,m,0).getDate();

    // å‰æœˆã®åŸ‹ã‚
    for(let i=0;i<start;i++){
      const d = new Date(y,m, -(start-1-i));
      body.appendChild(makeCell(prevLast-start+1+i, d, true));
    }
    // å½“æœˆ
    for(let day=1; day<=last; day++){
      const d = new Date(y,m,day);
      body.appendChild(makeCell(day, d, false));
    }
    // æ¬¡æœˆã®åŸ‹ã‚
    const total = start + last;
    const tail = (7 - (total % 7)) % 7;
    for(let i=1;i<=tail;i++){
      const d = new Date(y,m,last+i);
      body.appendChild(makeCell(i, d, true));
    }

    // ç¥æ—¥ä¸€è¦§
    const ymStr = `${y}-${pad(m+1)}`;
    if(Object.keys(jpHolidays).length===0){
      hl.textContent = 'èª­ã¿è¾¼ã¿ä¸­â€¦';
    }else{
      const keys = Object.keys(jpHolidays).filter(k=>k.startsWith(ymStr)).sort();
      hl.innerHTML = keys.length ? '' : 'ä»Šæœˆã®ç¥æ—¥ã¯ã‚ã‚Šã¾ã›ã‚“';
      keys.forEach(k=>{
        const [yy,mm,dd] = k.split('-').map(Number);
        const d = new Date(yy, mm-1, dd);
        const item = document.createElement('div');
        item.textContent = `${d.getMonth()+1}æœˆ${d.getDate()}æ—¥ ${jpHolidays[k]}`;
        hl.appendChild(item);
      });
    }
  }

  document.getElementById('prev').onclick = ()=>{ current = addMonths(current,-1); render(); };
  document.getElementById('next').onclick = ()=>{ current = addMonths(current, 1); render(); };
  document.getElementById('today').onclick = ()=>{ current = new Date(today); selected = new Date(today); render(); };
  window.addEventListener('keydown', e=>{
    if(e.key==='ArrowLeft'){ current = addMonths(current,-1); render(); }
    if(e.key==='ArrowRight'){ current = addMonths(current, 1); render(); }
  });

  renderHead(); render();
  loadHolidays(); // ç¥æ—¥ãƒ­ãƒ¼ãƒ‰å¾Œã«å†æç”»
</script>
</body>
</html>